<?phpclass Order_model extends CI_Model{    function __construct()    {        $this->load->database();    }             public function delete_invoice($invoice_id)    {       $sql="update tbl_invoice set convert_to_order='2' where invoice_id='".$invoice_id."'";        $update=  mysql_query($sql);          if($update)       {           return 1;       }else{           return 0;       }    }    public function convert_into_orders($order_id)    {        die('order_modeel');        echo $sql="insert into tbl_orders (order_id, customer_id, image_id, licence_cost, surface, print_size_height, print_size_width, print_cost, print_total, frame_id, frame_code, frame_size_height, frame_size_width, frame_cost, frame_total, mount_id, mount_code, mount_size_height, mount_size_width, mount_cost, mount_total, glass_id, glass_cost, status, total, after_discount, discount, tax, packing_charge, courier_charge, sales_person, sales_emailid, sales_contact, client_servicing, client_emailid, client_contact, createdby, convert_to_order, created_date)                select  invoice_id, customer_id, image_id, licence_cost, surface, print_size_height, print_size_width, print_cost, print_total, frame_id, frame_code, frame_size_height, frame_size_width, frame_cost, frame_total, mount_id, mount_code, mount_size_height, mount_size_width, mount_cost, mount_total, glass_id, glass_cost, status, total, after_discount, discount, tax, packing_charge, courier_charge, sales_person, sales_emailid, sales_contact, client_servicing, client_emailid, client_contact, createdby, convert_to_order, created_date               from tbl_invoice where invoice_id='".$order_id."'";        $insert=  mysql_query($sql);                $sql2="insert into tbl_orders_details (customer_id, order_id, first_name, last_name, email_id, gander, marries_statue, address, company_name, country, state, city, region, pincode, contact, created_date) select customer_id, invoice_id, first_name, last_name, email_id, gander, marries_statue, address, company_name, country, state, city, region, pincode, contact, created_date from tbl_invoice_details where invoice_id='".$order_id."'";        $insert2=  mysql_query($sql2);                        if($insert && $insert2)        {            $sql_3="update tbl_invoice set convert_to_order='1' where invoice_id='".$order_id."'";            mysql_query($sql_3);            return 1;        }else{            return 0;        }    }    public function get_customer_data($user_id)    {        $this->db->select('*');        $this->db->where('customer_id',$user_id);        $query=$this->db->get('tbl_registration');        return $query->result();    }    public function get_cart_values($user_id)    {        $this->db->select('*');        $this->db->where('user_id',$user_id);        $query=$this->db->get('tbl_cart');        return $query->result();    }    public function delete_cart_values($user_id)    {        $this->db->where('user_id',$user_id);        $this->db->delete('tbl_cart');    }    public function order_insert($data1)    {        $this->db->insert('order_details',$data1);        return $this->db->insert_id();    }    public function count_cart($user_id)    {        $this->db->select('*');        $this->db->where('user_id',$user_id);        $query=$this->db->get('tbl_cart');        return $query->num_rows();    }    public function get_frame_details($frameid)    {        $this->db->select('*');        $this->db->where('id',$frameid);        $query=$this->db->get('tbl_user_frame_details');        return $query->result();    }    public function order_check($customer_id)    {  $this->db->select('*');        $this->db->where('customer_id',$customer_id);        $query=$this->db->get('order_details');      return $query->num_rows();    }    public  function get_order_id()    {        $this->db->select('*');        $this->db->where('customer_id',$customer_id);        $query = $this->db->get('order_details');        return $query->result();    }    public function insert_order_items($data)    {        $this->db->insert('order_items',$data);    }    public function search_order($customer_name,$order_id,$region,$status)    {        $this->db->select('*');        if($customer_name)        {            $this->db->where('customer_name',$customer_name);        }        if( $status)        {            $this->db->where('order_status',$status);        }        if($order_id)        {            $this->db->where('order_id',$order_id);        }        $query=$this->db->get('order_details');        return $query->result_array();    }     public function record_count_order()  {    $this->db->select('*');    $this->db->where('order_status','0');    $this->db->or_where('order_status','1');     $this->db->or_where('order_status','2');     $this->db->or_where('order_status','3');    $this->db->or_where('order_status','4');    $this->db->or_where('order_status','5');    $query=$this->db->get('order_details');    return $query->num_rows();   }    public function get_order_pagination($limit,$start)  {    $this->db->limit($limit,$start);    $this->db->select('*');    $this->db->where('order_status','0');      $this->db->or_where('order_status','1');      $this->db->or_where('order_status','2');      $this->db->or_where('order_status','3');      $this->db->or_where('order_status','4');      $this->db->or_where('order_status','5');    $query=$this->db->get('order_details');    return $query->result_array();  }    public function get_order_details($order_id)    {        $this->db->select('*');        $this->db->where('order_id',$order_id);        $query=$this->db->get('order_items');        return $query->result();    }    public function get_printer_details(){   $this->db->select('*');    $this->db->where('vender_type',1);    $query=$this->db->get('tbl_vender');    return $query->result();}    public function get_framer_details()    {        $this->db->select('*');        $this->db->where('vender_type',2);        $query=$this->db->get('tbl_vender');        return $query->result();    }    public function get_packager_details()    {        $this->db->select('*');        $this->db->where('vender_type',3);        $query=$this->db->get('tbl_vender');        return $query->result();    }  public  function get_courier_details()  {     $this->db->select('*');     $this->db->where('vender_type',4);     $query=$this->db->get('tbl_vender');     return $query->result(); }    public function get_printer_byid($id)    {        $this->db->select('*');        $this->db->where('vender_id',$id);        $query=$this->db->get('tbl_vender');        return $query->row();    }    public function update_order_status($data)    {       $this->db->insert('order_status',$data);    }    public function update_order_details($order_id,$data2)    {            $this->db->where('order_id',$order_id);            $this->db->update('order_details',$data2);    }    public function update_order_printer_status($data)    {        $this->db->insert('order_printer_status',$data);    }    public function update_order_framer_status($data)    {        $this->db->insert('order_framer_status',$data);    }    public function update_order_packager_status($data)    {        $this->db->insert('order_packager_status',$data);    }    public function update_order_courier_status($data)    {        $this->db->insert('order_courier_status',$data);    }}